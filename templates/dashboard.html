<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest Todo - Gamified Task Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="app-container">
        <!-- Particles container for effects -->
        <div id="particles"></div>

        <!-- Compact horizontal header -->
        <header class="game-header" id="game-header">
            <!-- Level badge -->
            <div class="level-badge">
                <span class="level-icon">&#9733;</span>
                <span class="level-text">LVL <span id="level">1</span></span>
            </div>

            <!-- XP bar -->
            <div class="xp-container">
                <div class="xp-bar">
                    <div class="xp-fill" id="xp-fill"></div>
                    <span class="xp-text"><span id="xp">0</span>/<span id="xp-max">100</span></span>
                </div>
            </div>

            <!-- Combo indicator -->
            <div class="combo-container" id="combo-container">
                <span class="combo-fire">&#128293;</span>
                <span class="combo-count">x<span id="combo">0</span></span>
            </div>

            <!-- Mini stats -->
            <div class="stats-mini">
                <div class="stat-item" title="Completed quests">
                    <span class="stat-icon">&#9989;</span>
                    <span id="tasks-completed">0</span>
                </div>
                <div class="stat-item" title="Daily streak">
                    <span class="stat-icon">&#128293;</span>
                    <span id="streak-count">0</span>
                </div>
                <div class="stat-item" title="Achievements">
                    <span class="stat-icon">&#127942;</span>
                    <span id="achievements-count">0</span>
                </div>
            </div>

            <!-- Settings button with dropdown -->
            <div class="settings-wrapper">
                <button class="settings-btn" id="settings-toggle" title="Settings">
                    <span>&#9881;</span>
                </button>
                <div class="settings-dropdown" id="settings-dropdown">
                    <div class="settings-user">
                        <span class="user-icon">&#128100;</span>
                        <span class="user-name">{{ user }}</span>
                    </div>
                    <div class="settings-divider"></div>
                    <button class="settings-item" id="sound-toggle">
                        <span id="sound-icon">&#128264;</span>
                        <span class="settings-label">Sound</span>
                        <span class="settings-status" id="sound-status">OFF</span>
                    </button>
                    <button class="settings-item" id="theme-toggle">
                        <span id="theme-icon">&#9728;</span>
                        <span class="settings-label">Theme</span>
                        <span class="settings-status" id="theme-status">Dark</span>
                    </button>
                    <div class="settings-divider"></div>
                    <a href="/logout" class="settings-item settings-logout">
                        <span>&#128682;</span>
                        <span class="settings-label">Logout</span>
                    </a>
                    <div class="settings-divider"></div>
                    <div class="settings-version">
                        <span class="version-badge">{{ version }}</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content -->
        <main class="main-content">
            <!-- Add task form -->
            <form class="add-task-form" id="add-task-form">
                <div class="input-wrapper">
                    <input
                        type="text"
                        id="task-input"
                        placeholder="What quest awaits you today?"
                        autocomplete="off"
                        maxlength="100"
                    >
                    <button type="submit" class="add-btn" id="add-btn">
                        <span class="btn-icon">+</span>
                        <span class="btn-text">Add Quest</span>
                    </button>
                </div>
            </form>

            <!-- Tasks list -->
            <div class="tasks-section">
                <h2 class="section-title">
                    <span class="title-icon">&#128221;</span>
                    Active Quests
                    <span class="task-count" id="task-count">(0)</span>
                </h2>

                <ul class="tasks-list" id="tasks-list">
                    <!-- Tasks will be rendered here -->
                </ul>

                <div class="empty-state" id="empty-state">
                    <div class="empty-icon">&#127919;</div>
                    <p>No quests yet!</p>
                    <p class="empty-hint">Add your first quest above</p>
                </div>
            </div>
        </main>

        <!-- Achievements panel -->
        <aside class="achievements-panel" id="achievements-panel">
            <h3 class="panel-title">
                <span>&#127942;</span> Achievements
            </h3>
            <div class="achievements-grid" id="achievements-grid">
                <!-- Achievements will be rendered here -->
            </div>
        </aside>

        <!-- Achievement popup -->
        <div class="achievement-popup" id="achievement-popup">
            <div class="popup-content">
                <div class="popup-icon" id="popup-icon">&#127942;</div>
                <div class="popup-title">Achievement Unlocked!</div>
                <div class="popup-name" id="popup-name"></div>
                <div class="popup-desc" id="popup-desc"></div>
            </div>
        </div>

        <!-- Level up popup -->
        <div class="levelup-popup" id="levelup-popup">
            <div class="levelup-content">
                <div class="levelup-stars">&#10024; &#10024; &#10024;</div>
                <div class="levelup-title">LEVEL UP!</div>
                <div class="levelup-level">Level <span id="new-level">2</span></div>
            </div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
