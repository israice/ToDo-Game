<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo Game - –ì–µ–π–º–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéØ</text></svg>">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <a href="#tasks-list" class="skip-to-content">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–¥–∞—á–∞–º</a>
    <div class="app-container">
        <!-- Particles container for effects -->
        <div id="particles"></div>

        <!-- Compact horizontal header -->
        <header class="game-header" id="game-header">
            <div class="level-row">
                <div class="level-badge">
                    <span class="level-icon">&#9733;</span>
                    <span class="level-text">LVL <span id="level">1</span></span>
                </div>
                <div class="xp-container">
                    <div class="xp-bar">
                        <div class="xp-fill" id="xp-fill"></div>
                        <span class="xp-text"><span id="xp">0</span>/<span id="xp-max">100</span></span>
                    </div>
                </div>
            </div>

            <div class="header-right">
                <div class="stats-mini">
                    <div class="stat-item" aria-label="–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã">
                        <span class="stat-icon" aria-hidden="true">&#9989;</span>
                        <span id="tasks-completed">0</span>
                    </div>
                    <div class="stat-item" aria-label="–î–Ω–µ–≤–Ω–∞—è —Å–µ—Ä–∏—è">
                        <span class="stat-icon" aria-hidden="true">&#128293;</span>
                        <span id="streak-count">0</span>
                    </div>
                    <div class="stat-item" aria-label="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è">
                        <span class="stat-icon" aria-hidden="true">&#127942;</span>
                        <span id="achievements-count">0</span>
                    </div>
                </div>

                <!-- Combo indicator -->
                <div class="combo-container" id="combo-container">
                    <span class="combo-fire">&#128293;</span>
                    <span class="combo-count">x<span id="combo">0</span></span>
                </div>

                <!-- Settings button with dropdown -->
                <div class="settings-wrapper">
                    <button class="settings-btn" id="settings-toggle" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                        <span aria-hidden="true">&#9881;</span>
                    </button>
                    <div class="settings-dropdown" id="settings-dropdown">
                        <div class="settings-user">
                            <span class="user-icon">&#128100;</span>
                            <span class="user-name">{{ user }}</span>
                        </div>
                        <div class="settings-divider"></div>
                        <button class="settings-item" id="sound-toggle">
                            <span id="sound-icon">&#128264;</span>
                            <span class="settings-label">–ó–≤—É–∫</span>
                            <span class="settings-status" id="sound-status">OFF</span>
                        </button>
                        <div class="settings-divider"></div>
                        <button class="settings-item" id="version-btn">
                            <span>&#128736;</span>
                            <span class="settings-label">–í–µ—Ä—Å–∏—è</span>
                            <span class="settings-status">{{ version }}</span>
                        </button>
                        <div class="settings-divider"></div>
                        <a href="/logout" class="settings-item settings-logout">
                            <span>&#128682;</span>
                            <span class="settings-label">–í—ã–π—Ç–∏</span>
                        </a>
                    </div>
                </div>
            </div>

        </header>

        <!-- Main content -->
        <main class="main-content">
            <!-- Add task form -->
            <form class="add-task-form" id="add-task-form" role="form" aria-label="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–≤–µ—Å—Ç">
                <div class="input-wrapper">
                    <input
                        type="text"
                        id="task-input"
                        placeholder="–ö–∞–∫–æ–π –∫–≤–µ—Å—Ç –∂–¥—ë—Ç —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è?"
                        autocomplete="off"
                        maxlength="100"
                    >
                    <button type="submit" class="add-btn" id="add-btn">
                        <span class="btn-icon">+</span>
                        <span class="btn-text">–î–æ–±–∞–≤–∏—Ç—å</span>
                    </button>
                </div>
            </form>

            <!-- Tasks list -->
            <div class="tasks-section">
                <h2 class="section-title">
                    <span class="title-icon">&#128221;</span>
                    –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
                    <span class="task-count" id="task-count">(0)</span>
                </h2>

                <div class="skeleton-loader" id="skeleton-loader">
                    <div class="skeleton-task"></div>
                    <div class="skeleton-task"></div>
                    <div class="skeleton-task"></div>
                </div>

                <ul class="tasks-list" id="tasks-list" role="list" aria-live="polite">
                    <!-- Tasks will be rendered here -->
                </ul>

                <div class="empty-state" id="empty-state">
                    <div class="empty-icon">&#127919;</div>
                    <p>–ö–≤–µ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç!</p>
                    <p class="empty-hint">–î–æ–±–∞–≤—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫–≤–µ—Å—Ç –≤—ã—à–µ</p>
                </div>
            </div>
        </main>

        <!-- Achievements panel -->
        <aside class="achievements-panel" id="achievements-panel">
            <h3 class="panel-title">
                <span>&#127942;</span> –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            </h3>
            <div class="achievements-grid" id="achievements-grid">
                <!-- Achievements will be rendered here -->
            </div>
        </aside>

        <!-- Achievement popup -->
        <div class="achievement-popup" id="achievement-popup" role="alert" aria-live="assertive">
            <div class="popup-content">
                <div class="popup-icon" id="popup-icon">&#127942;</div>
                <div class="popup-title">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!</div>
                <div class="popup-name" id="popup-name"></div>
                <div class="popup-desc" id="popup-desc"></div>
            </div>
        </div>

        <!-- Level up popup -->
        <div class="levelup-popup" id="levelup-popup" role="dialog" aria-live="assertive" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ">
            <div class="levelup-content">
                <div class="levelup-stars">&#10024; &#10024; &#10024;</div>
                <div class="levelup-title">–ù–û–í–´–ô –£–†–û–í–ï–ù–¨!</div>
                <div class="levelup-level">–£—Ä–æ–≤–µ–Ω—å <span id="new-level">2</span></div>
            </div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
